<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparación de Estructura</title>
    <link rel="stylesheet" href="styles-v5/main.css">
    <style>
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
        }
        .section {
            border: 2px solid #387ade;
            padding: 10px;
        }
        h2 {
            background: #387ade;
            color: white;
            padding: 10px;
            margin: -10px -10px 10px -10px;
        }
        .debug-box {
            position: fixed;
            bottom: 10px;
            left: 10px;
            right: 10px;
            background: black;
            color: lime;
            padding: 10px;
            z-index: 10000;
            font-family: monospace;
            max-height: 200px;
            overflow-y: auto;
        }
        
        /* Resaltar el container */
        .container {
            border: 3px dashed red !important;
            background: rgba(255,0,0,0.05) !important;
        }
        
        .messages-grid {
            border: 2px dashed green !important;
            background: rgba(0,255,0,0.05) !important;
        }
    </style>
</head>
<body>
    <div class="debug-box">
        <div id="debug-info"></div>
        <button onclick="analyzeStructure()">Analizar Estructura</button>
    </div>

    <div class="comparison-container">
        <!-- IZQUIERDA: Como el test (funciona) -->
        <div class="section">
            <h2>COMO EL TEST (funciona)</h2>
            <div class="campaign-library-module">
                <div class="messages-grid">
                    <div class="message-card">
                        <div class="message-header">
                            <h3 class="message-title">Test que funciona</h3>
                            <span class="message-badge badge-ofertas">OFERTAS</span>
                        </div>
                        <div class="message-content" id="test-content">
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                        </div>
                        <div class="message-meta">
                            <div class="message-actions">
                                <button class="btn-icon">▶</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- DERECHA: Como producción (no funciona) -->
        <div class="section">
            <h2>COMO PRODUCCIÓN (no funciona)</h2>
            <div class="container">
                <div class="campaign-library-module">
                    <div class="messages-grid">
                        <div class="message-card">
                            <div class="message-header">
                                <h3 class="message-title">Card 1 Producción</h3>
                                <span class="message-badge badge-eventos">EVENTOS</span>
                            </div>
                            <div class="message-content" id="prod-content">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            </div>
                            <div class="message-meta">
                                <div class="message-actions">
                                    <button class="btn-icon">▶</button>
                                </div>
                            </div>
                        </div>
                        <!-- SEGUNDO CARD para ver el problema del grid -->
                        <div class="message-card" style="background: yellow !important;">
                            <div class="message-header">
                                <h3 class="message-title">Card 2 - COLAPSADO?</h3>
                                <span class="message-badge badge-ofertas">OFERTAS</span>
                            </div>
                            <div class="message-content">
                                Este es el segundo card que debería estar visible pero está colapsado
                            </div>
                            <div class="message-meta">
                                <div class="message-actions">
                                    <button class="btn-icon">▶</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function analyzeStructure() {
            const testContent = document.getElementById('test-content');
            const prodContent = document.getElementById('prod-content');
            
            const testStyles = window.getComputedStyle(testContent);
            const prodStyles = window.getComputedStyle(prodContent);
            
            const debug = document.getElementById('debug-info');
            
            // Comparar estilos críticos
            const criticalStyles = [
                'display',
                'webkitLineClamp',
                'webkitBoxOrient',
                'overflow',
                'maxHeight',
                'height',
                'lineHeight',
                'fontSize'
            ];
            
            let comparison = '<table style="font-size: 12px; border-collapse: collapse;">';
            comparison += '<tr><th>Propiedad</th><th>TEST</th><th>PROD</th><th>Match?</th></tr>';
            
            criticalStyles.forEach(prop => {
                const testVal = testStyles[prop];
                const prodVal = prodStyles[prop];
                const match = testVal === prodVal ? '✅' : '❌';
                comparison += `<tr>
                    <td style="border: 1px solid #555; padding: 2px;">${prop}</td>
                    <td style="border: 1px solid #555; padding: 2px;">${testVal}</td>
                    <td style="border: 1px solid #555; padding: 2px;">${prodVal}</td>
                    <td style="border: 1px solid #555; padding: 2px; text-align: center;">${match}</td>
                </tr>`;
            });
            
            comparison += '</table>';
            
            // Mostrar altura real
            comparison += `<br>Altura TEST: ${testContent.offsetHeight}px`;
            comparison += `<br>Altura PROD: ${prodContent.offsetHeight}px`;
            
            // Verificar si .container afecta
            const container = document.querySelector('.container');
            if (container) {
                const containerStyles = window.getComputedStyle(container);
                comparison += `<br><br><strong>Container styles:</strong>`;
                comparison += `<br>Width: ${containerStyles.width}`;
                comparison += `<br>Padding: ${containerStyles.padding}`;
                comparison += `<br>Box-sizing: ${containerStyles.boxSizing}`;
                comparison += `<br>Display: ${containerStyles.display}`;
            }
            
            // Verificar el grid
            const testGrid = document.querySelector('.section:first-child .messages-grid');
            const prodGrid = document.querySelector('.section:last-child .messages-grid');
            if (testGrid && prodGrid) {
                comparison += `<br><br><strong>Grid comparison:</strong>`;
                comparison += `<br>TEST grid width: ${testGrid.offsetWidth}px`;
                comparison += `<br>PROD grid width: ${prodGrid.offsetWidth}px`;
                comparison += `<br>TEST grid cols: ${window.getComputedStyle(testGrid).gridTemplateColumns}`;
                comparison += `<br>PROD grid cols: ${window.getComputedStyle(prodGrid).gridTemplateColumns}`;
                
                // Verificar los cards
                const testCard = testGrid.querySelector('.message-card');
                const prodCard = prodGrid.querySelector('.message-card');
                if (testCard && prodCard) {
                    comparison += `<br><br><strong>Card widths:</strong>`;
                    comparison += `<br>TEST card: ${testCard.offsetWidth}px`;
                    comparison += `<br>PROD card: ${prodCard.offsetWidth}px`;
                    comparison += `<br>TEST card box-sizing: ${window.getComputedStyle(testCard).boxSizing}`;
                    comparison += `<br>PROD card box-sizing: ${window.getComputedStyle(prodCard).boxSizing}`;
                }
            }
            
            debug.innerHTML = comparison;
        }
        
        // Analizar automáticamente al cargar
        setTimeout(analyzeStructure, 100);
    </script>
</body>
</html>